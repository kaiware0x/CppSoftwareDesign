
# C++ソフトウェア設計

書籍「C++ソフトウェア設計 ― 高品質設計の原則とデザインパターン」のソースコードをまとめたリポジトリ。

https://www.oreilly.co.jp/books/9784814400454/


## Memo

### VisitorとStrategyの違い

| 特徴                   | Visitor            | Strategy           |
| ---------------------- | ------------------ | ------------------ |
| バリエーションポイント | 処理の汎用的な追加 | 単一関数の実装詳細 |
| 抽象化の対象           | 処理               | 実装詳細           |
| 型の追加               | 容易でない         | 容易               |
| 処理の追加             | 容易               | 容易でない         |
| 実装方法               | std::visit         | 依存性注入         |


### CommandとStrategyの違い

両者のクラス図は同じ形をしている。

| 特徴     | Command                                            | Strategy                           |
| -------- | -------------------------------------------------- | ---------------------------------- |
| 対象     | 何を行うか(What)                                   | どう行うか(How)                    |
| 実装方法 | オブジェクトに動作を外部から設定せず、直接実行する | 依存性注入で外部から動作を設定する |

### BridgeとStrategyの違い

| 特徴     | Bridge                   | Strategy                           |
| -------- | ------------------------ | ---------------------------------- |
| 種類     | 構造に関するパターン     | 振る舞いに関するパターン           |
| 実装方法 | 内部で実装詳細を設定する | 依存性注入で外部から動作を設定する |


### Type Erasureについて

- ここで用いられている`Type Erasure`と異なる文脈でも使われる
  - `void*`
  - 基底クラスを指すポインタ
  - `std::variant`
- `External Polymorphism`：型の追加を容易にする
- `std::variant`：処理の追加を容易にする